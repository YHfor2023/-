<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <!--edge浏览器H5兼容设置-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--360浏览器H5兼容设置-->
    <meta name="renderer" content="webkit"/>
    <title>花漫|购物车</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--导入核心文件-->
    <script src="../bootstrap3/js/holder.js"></script>
    <link href="../bootstrap3/css/bootstrap.css" rel="stylesheet" type="text/css">
    <script src="../bootstrap3/jquery-1.9.1.min.js"></script>
    <script src="../bootstrap3/js/bootstrap.js"></script>
    <!-- 字体图标 -->
    <link rel="stylesheet" href="../bootstrap3/font-awesome-4.7.0/css/font-awesome.css"/>
    <link rel="stylesheet" type="text/css" href="../css/layout.css"/>
    <link rel="stylesheet" type="text/css" href="../css/top.css"/>
    <link rel="stylesheet" type="text/css" href="../css/footer.css"/>
    <link rel="stylesheet" type="text/css" href="../css/cart.css"/>
    <script src="../js/cart.js" type="text/javascript" charset="utf-8"></script>
</head>
<style>


    body {
        overflow-x: hidden;
    }

    .leading {
        padding: 0;
        margin: 0;
        width: 100%;
        height: 60px;
        background-color: #ffedf3;
        border: 1px solid #ffedf3;
    }

    .leading_content {
        margin: 10px 2%;
        width: 96%;
        height: 40px;
        /*background-color: #c9c9c9;*/
    }

    .logo {
        float: left;
        height: 40px;
        width: 120px;
        margin-right: 40px;
        /*background-color: #d3d3d3;*/
    }

    .logo img {
        margin-top: -1px;
        margin-left: -1px;
        height: 42px;
        width: 122px;
    }

    .leading_items {
        float: left;
        height: 40px;
        width: 400px;
        /*background-color: #a6a4a4;*/
    }

    .leading_items a {
        color: #050505;
    }

    #top-dropdown-btn {
        color: #050505;
    }

    .leading_buns {
        float: right;
        height: 40px;
        width: 160px;
        margin-left: 50px;
        /*background-color: #525151;*/
    }

    .leading_bun-2 {
        float: right;
        height: 40px;
        width: 40px;
        border-radius: 100%;
        margin-left: 10px;
        border: 0;
        background-color: #dadada;
    }

    .search {
        float: right;
        height: 40px;
        width: 400px;
        /*background-color: #525151;*/
    }

    .menu1 {
        width: 800px;
        height: 500px;
        background-color: #ffedf3;
        margin: -5px auto;

    }

    .menu-left {
        float: left;
        width: 180px;
        height: 400px;
        /*background-color: #a0a2a2;*/
        border: 1px solid #ffedf3;
    }

    .menu-left a {
        color: white;
        font-weight: bolder;
    }

    .menu-left li {
        width: 160px;
        height: 45px;
        margin: 5px auto;
        background-color: #3c3c3c;
        border: 1px solid #ffffff;
        border-radius: 8px;
    }

    .menu-mid {
        float: left;
        margin-left: 20px;
        width: 280px;
        height: 500px;
        /*background-color: #a0a2a2;*/
        资料修改
        border: 1px solid #ffedf3;
    }

    .menu-mid-1 {
        width: 90px;
        height: 45px;
        margin-top: 30px;
        background-color: transparent;
    }

    .menu-mid-2 {
        width: 276px;
        height: 300px;
        margin-top: 30px;
        /*background-color: #e3e1e1;*/
    }

    .menu-mid-2 li {
        float: left;
        width: 135px;
        height: 45px;
        margin: 5px auto;
        background-color: #ffffff;
        border: 1px solid #bebebe;
        border-radius: 4px;
    }

    .menu-mid-2 li a {
        color: #333333;
    }

    .menu-right {
        float: left;
        margin-left: 80px;
        width: 180px;
        height: 500px;
        /*background-color: #a0a2a2;*/
    }

    .menu-right-1 {
        margin-top: 30px;
        height: 200px;
        width: 180px;
        background-color: #a9a9a9;
    }

    .menu-right-1 img {
        height: 200px;
        width: 180px;
    }

    .menu-right-2 {
        margin-top: 30px;
        height: 180px;
        width: 180px;
        background-color: #a9a9a9;
    }

    .menu-right-2 img {
        height: 180px;
        width: 180px;
    }
</style>
<body>
<!--头部-->
<div class="leading">
    <div class="leading_content">
        <div class="logo">
            <img src="../images/index/huamanlogo.png">
        </div>
        <div class="leading_items">
            <div class="col-md-9 top-item"
                 style="padding:0;margin: 0;float: left;width: 100%">
                <ul class="list-inline pull-left"
                    style="margin-left: 5px">
                    <li style="width: 40px">
                        <a href="index.html">首页</a></li>
                    <li class="li-split">|</li>
                    <li style="width: 60px;padding-right: 0;padding-left: 0;">
                        <!--下列列表按钮 ：管理-->
                        <div class="btn-group">
                            <button type="button" class="btn btn-link dropdown-toggle"
                                    data-toggle="dropdown"
                                    style="padding: 6px 0">
                                <span id="top-dropdown-btn">女大童<span class="caret"></span></span>
                            </button>
                            <ul class="dropdown-menu top-dropdown-ul" role="menu">
                                <div class="menu1">
                                    <div class="menu-left">
                                        <li><a href="searchfor.html?title=女大童%23上装&pageNum=1&pageSize=12">上装</a>
                                        </li>
                                        <li><a href="searchfor.html?title=女大童%23下装&pageNum=1&pageSize=12">下装</a>
                                        </li>
                                        <li><a href="searchfor.html?title=女大童%23套装&pageNum=1&pageSize=12">套装</a>
                                        </li>
                                    </div>
                                    <div class="menu-mid">
                                        <div class="menu-mid-1">
                                            <h2 style="font-weight: bolder;text-align: center">女大童</h2></div>
                                        <div class="menu-mid-2">
                                            <li>
                                                <a href="searchfor.html?title=女大童%23下装%23短裤&pageNum=1&pageSize=12">短裤</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23下装%23长裤&pageNum=1&pageSize=12">长裤</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23下装%23短裙&pageNum=1&pageSize=12">短裙</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23上装%23T恤&pageNum=1&pageSize=12">T恤</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23上装%23卫衣&pageNum=1&pageSize=12">卫衣</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23上装%23连衣裙&pageNum=1&pageSize=12">连衣裙</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23套装%23长袖套装&pageNum=1&pageSize=12">长袖套装</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23套装%23短袖套装&pageNum=1&pageSize=12">短袖套装</a>
                                            </li>
                                            <li><a href="searchfor.html?title=女大童&pageNum=1&pageSize=12">全部</a>
                                            </li>
                                        </div>
                                    </div>
                                    <div class="menu-right">
                                        <div class="menu-right-1">
                                            <img src="../images/index/leading_right_5.png">
                                        </div>
                                        <div class="menu-right-2">
                                            <img src="../images/index/leading_right_6.png">

                                        </div>
                                    </div>
                                </div>
                            </ul>
                        </div>
                    </li>
                    <li class="li-split">|</li>
                    <li style="width: 60px;padding-right: 0;padding-left: 0;">
                        <!--下列列表按钮 ：管理-->
                        <div class="btn-group">
                            <button type="button" class="btn btn-link dropdown-toggle"
                                    data-toggle="dropdown"
                                    style="padding: 6px 0">
                                <span id="top-dropdown-btn">女中童<span class="caret"></span></span>
                            </button>
                            <ul class="dropdown-menu top-dropdown-ul" role="menu">
                                <div class="menu1">
                                    <div class="menu-left">
                                        <li><a href="searchfor.html?title=女中童%23上装&pageNum=1&pageSize=12">上装</a>
                                        </li>
                                        <li><a href="searchfor.html?title=女中童%23下装&pageNum=1&pageSize=12">下装</a>
                                        </li>
                                        <li><a href="searchfor.html?title=女中童%23套装&pageNum=1&pageSize=12">套装</a>
                                        </li>
                                    </div>
                                    <div class="menu-mid">
                                        <div class="menu-mid-1">
                                            <h2 style="font-weight: bolder;text-align: center">女中童</h2></div>
                                        <div class="menu-mid-2">
                                            <li>
                                                <a href="searchfor.html?title=女中童%23下装%23短裤&pageNum=1&pageSize=12">短裤</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女中童%23下装%23七分裤&pageNum=1&pageSize=12">七分裤</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女中童%23下装%23短裙&pageNum=1&pageSize=12">短裙</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女中童%23上装%23T恤&pageNum=1&pageSize=12">T恤</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女中童%23上装%23卫衣&pageNum=1&pageSize=12">卫衣</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女中童%23上装%23针织衫&pageNum=1&pageSize=12">针织衫</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女中童%23上装%23连衣裙&pageNum=1&pageSize=12">连衣裙</a>
                                            </li>
                                            <li><a href="searchfor.html?title=女大童&pageNum=1&pageSize=12">全部</a>
                                            </li>
                                        </div>
                                    </div>
                                    <div class="menu-right">
                                        <div class="menu-right-1">
                                            <img src="../images/index/leading_right_7.png">
                                        </div>
                                        <div class="menu-right-2">
                                            <img src="../images/index/leading_right_8.png">
                                        </div>
                                    </div>
                                </div>
                            </ul>
                        </div>
                    </li>
                    <li class="li-split">|</li>
                    <li style="width: 60px;padding-right: 0;padding-left: 0;">
                        <!--下列列表按钮 ：管理-->
                        <div class="btn-group">
                            <button type="button" class="btn btn-link dropdown-toggle"
                                    data-toggle="dropdown"
                                    style="padding: 6px 0">
                                <span id="top-dropdown-btn">女小童<span class="caret"></span></span>
                            </button>
                            <ul class="dropdown-menu top-dropdown-ul" role="menu">
                                <div class="menu1">
                                    <div class="menu-left">
                                        <li><a href="searchfor.html?title=女大童%23上装&pageNum=1&pageSize=12">上装</a>
                                        </li>
                                        <li><a href="searchfor.html?title=女大童%23下装&pageNum=1&pageSize=12">下装</a>
                                        </li>
                                        <li><a href="searchfor.html?title=女大童%23套装&pageNum=1&pageSize=12">套装</a>
                                        </li>
                                    </div>
                                    <div class="menu-mid">
                                        <div class="menu-mid-1">
                                            <h2 style="font-weight: bolder;text-align: center">女小童</h2></div>
                                        <div class="menu-mid-2">
                                            <li>
                                                <a href="searchfor.html?title=女大童%23下装%23短裤&pageNum=1&pageSize=12">短裤</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23下装%23长裤&pageNum=1&pageSize=12">长裤</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23下装%23短裙&pageNum=1&pageSize=12">短裙</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23上装%23T恤&pageNum=1&pageSize=12">T恤</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23上装%23卫衣&pageNum=1&pageSize=12">卫衣</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23上装%23连衣裙&pageNum=1&pageSize=12">连衣裙</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23套装%23长袖套装&pageNum=1&pageSize=12">长袖套装</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23套装%23短袖套装&pageNum=1&pageSize=12">短袖套装</a>
                                            </li>
                                            <li><a href="searchfor.html?title=女大童&pageNum=1&pageSize=12">全部</a>
                                            </li>
                                        </div>
                                    </div>
                                    <div class="menu-right">
                                        <div class="menu-right-1">
                                            <img src="../images/index/leading_right_3.png">
                                        </div>
                                        <div class="menu-right-2">
                                            <img src="../images/index/leading_right_4.png">
                                        </div>
                                    </div>
                                </div>
                            </ul>
                        </div>
                    </li>
                    <li class="li-split">|</li>
                    <li style="width: 60px;padding-right: 0;padding-left: 0;">
                        <!--下列列表按钮 ：管理-->
                        <div class="btn-group">
                            <button type="button" class="btn btn-link dropdown-toggle"
                                    data-toggle="dropdown"
                                    style="padding: 6px 0">
                                <span id="top-dropdown-btn">女婴童<span class="caret"></span></span>
                            </button>
                            <ul class="dropdown-menu top-dropdown-ul" role="menu">
                                <div class="menu1">
                                    <div class="menu-left">
                                        <li><a href="searchfor.html?title=女大童%23上装&pageNum=1&pageSize=12">上装</a>
                                        </li>
                                        <li><a href="searchfor.html?title=女大童%23下装&pageNum=1&pageSize=12">下装</a>
                                        </li>
                                        <li><a href="searchfor.html?title=女大童%23套装&pageNum=1&pageSize=12">套装</a>
                                        </li>
                                    </div>
                                    <div class="menu-mid">
                                        <div class="menu-mid-1">
                                            <h2 style="font-weight: bolder;text-align: center">女婴童</h2></div>
                                        <div class="menu-mid-2">
                                            <li>
                                                <a href="searchfor.html?title=女大童%23下装%23短裤&pageNum=1&pageSize=12">短裤</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23下装%23长裤&pageNum=1&pageSize=12">长裤</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23下装%23短裙&pageNum=1&pageSize=12">短裙</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23上装%23T恤&pageNum=1&pageSize=12">T恤</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23上装%23卫衣&pageNum=1&pageSize=12">卫衣</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23上装%23连衣裙&pageNum=1&pageSize=12">连衣裙</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23套装%23长袖套装&pageNum=1&pageSize=12">长袖套装</a>
                                            </li>
                                            <li>
                                                <a href="searchfor.html?title=女大童%23套装%23短袖套装&pageNum=1&pageSize=12">短袖套装</a>
                                            </li>
                                            <li><a href="searchfor.html?title=女大童&pageNum=1&pageSize=12">全部</a>
                                            </li>
                                        </div>
                                    </div>
                                    <div class="menu-right">
                                        <div class="menu-right-1">
                                            <img src="../images/index/leading_right_1.png">
                                        </div>
                                        <div class="menu-right-2">
                                            <img src="../images/index/leading_right_2.png">
                                        </div>
                                    </div>
                                </div>
                            </ul>
                        </div>
                    </li>

                </ul>
            </div>
        </div>

        <div class="leading_buns" id="leading_buns_id">
            <input value="登录" type="button"
                   onclick="javascript:window.location.href='login.html'"
                   style="height: 40px;width: 75px;border: 1px solid white;background-color: transparent">
            <input value="注册" type="button"
                   onclick="javascript:window.location.href='register.html'"
                   style="height: 40px;width: 75px;border: 1px solid white;background-color: #3c3c3c;color: white">
        </div>

        <div class="search">
            <form action="searchfor.html" onsubmit="return checkIfHaveVal()" class="form-inline pull-right" role="form">
                <div class="form-group">
                    <!--						http://localhost:8080/web/search.html?title=1&pageNum=1&pageSize=12-->
                    <input type="text" class="form-control" name="title"
                           style="width: 350px;height: 40px;border: 1px solid white"
                           placeholder="请输入商品名称进行搜索">
                    <input type="hidden" id="pageNum" name="pageNum" value="1">
                    <input type="hidden" id="pageSize" name="pageSize" value="12">
                </div>
                <button type="submit" class="btn btn-default btn-sm"
                        style="width: 40px;height: 40px;margin-right: 5px;
                        border: 1px solid white;background-color: transparent">
                    <span class="fa fa-search"></span></button>
            </form>
        </div>
    </div>
</div>
<!--头部结束-->
<!--主题内容开始-->
<div style="height: 600px;">
    <div style="float:left;height: 600px;width: 70%;">
        <div class="container" style="margin-top: 50px;padding:0;width: 100%">
            <div class="col-md-offset-1 col-md-10" style="width: 100%;margin: 0 auto">
                <div class="panel panel-primary"
                     style="border: 1px solid white">
                    <div class="panel-heading"
                         style="background-color: #3c3c3c;border: 1px solid white">
                        <p class="panel-title"><span class="fa fa-shopping-cart"></span> 购物车</p>
                    </div>
                    <div class="panel-body">
                        <form action="orderConfirm.html" role="form">
                            <!--购物车表格开始-->
                            <table class="cart-table" width="100%">
                                <thead>
                                <tr>
                                    <th width="8%">
                                        <input type="checkbox" class="ckall" onclick="checkall(this)"/>全选
                                    </th>
                                    <th width="120"></th>
                                    <th width="25%">商品</th>
                                    <th width="25%">详细信息</th>
                                    <th width="15%">数量</th>
                                    <th width="11%">金额</th>
                                </tr>
                                <!--                                <tr>-->
                                <!--<th width="8%">-->
                                <!--    <input type="checkbox" class="ckall" onclick="checkall(this)"/>全选-->
                                <!--</th>-->
                                <!--<th width="110"></th>-->
                                <!--<th width="29%">商品</th>-->
                                <!--<th width="11%">单价</th>-->
                                <!--<th width="15%">数量</th>-->
                                <!--<th width="11%">金额</th>-->
                                <!--<th>操作</th>-->
                                <!--                                </tr>-->
                                </thead>


                                <tbody id="cart-list" class="cart-body">
                                <!--                                <tr>-->
                                <!--<td>-->
                                <!--    <input type="checkbox" class="ckitem"/>-->
                                <!--</td>-->
                                <!--<td><img src="../images/portal/10000001/collect.png"-->
                                <!--         class="img-responsive"/></td>-->
                                <!--<td style="">针织短裤</td>-->
                                <!--<td>-->
                                <!--    <li>颜色：红色</li>-->
                                <!--    <li>尺码：M</li>-->
                                <!--    <li>面料：纯棉</li>-->
                                <!--    <li>等级：亲肤</li>-->
                                <!--</td>-->
                                <!--<td>-->
                                <!--    <div>-->
                                <!--        <input type="button" value="-" class="num-btn" onclick="reduceNum(1)"/>-->
                                <!--        <input type="text" size="2" readonly="readonly"-->
                                <!--               class="num-text" value="1">-->
                                <!--        <input class="num-btn" type="button" value="+" onclick="addNum(1)"/>-->

                                <!--    </div>-->
                                <!--    <div style="width: 100%;border: 1px solid white;margin-top: 10px">-->
                                <!--        <input type="button" onclick=""-->
                                <!--               class="cart-del btn btn-default btn-xs" value="修改"-->
                                <!--               style="width: 70%;margin: 0 auto"/>-->
                                <!--    </div>-->
                                <!--    <div style="width: 100%;border: 1px solid white;margin-top: 5px">-->
                                <!--        <input type="button" onclick="delCartItem(this)"-->
                                <!--               class="cart-del btn btn-default btn-xs" value="删除"-->
                                <!--               style="width: 70%;margin: 0 auto"/>-->
                                <!--    </div>-->
                                <!--</td>-->
                                <!--<td>-->
                                <!--    <li>单价：98<span>¥</span></li>-->
                                <!--    <li>小计：98<span>¥</span></li>-->
                                <!--</td>-->
                                <!--                                </tr>-->
                                </tbody>
                            </table>
                            <div class="total-bar"
                                 style="height: 50px;background-color: #fdf9fb ">
                                <a href="javascript:selDelCart()"
                                   class="cart-del-sel btn btn-default btn-xs"
                                   style="float: right;margin-right: 30px;
                                   border: 1px solid #3c3c3c;background-color:#3c3c3c;color: white">删除所选商品</a>
                                <!--                                <span class="pull-right">已选商品-->
                                <!--								<span id="selectCount">0</span>件 总价¥-->
                                <!--								<span id="selectTotal">0</span>元-->
                                <!--								</span>-->
                            </div>
                            <div>
								<span class="pull-right">
								<input type="submit" value="  结  算  " class="btn btn-primary btn-lg link-account"
                                       style="width: 100%;color:white;background-color: #3c3c3c ;border: white 1px solid"/>
							</span>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div style="position: fixed;height: 600px;width: 30%;right: 0;top:100px">
        <div style="height: 400px;width: 70%;margin: 120px auto">
            <!--            <div class="total-bar"-->
            <!--                 style="margin: 10px 0; background-color: #fdf9fb;-->
            <!--                 text-align: center;font-size: 18px;font-weight: bolder">订单小结-->
            <!--            </div>-->
            <!--            <div class="total-bar" style="margin: 10px 0;background-color: #fdf9fb ">服装总计-->
            <!--                <span class="pull-right">-->
            <!--				<span id="">0</span>￥-->
            <!--				</span>-->
            <!--            </div>-->
            <!--            <div class="total-bar" style="margin: 10px 0;background-color: #fdf9fb ">运输费用-->
            <!--                <span class="pull-right">-->
            <!--				<span>0</span>￥-->
            <!--				</span>-->
            <!--            </div>-->
            <!--            <div class="total-bar" style="margin: 10px 0;background-color: #fdf9fb ">合计-->
            <!--                <span class="pull-right">-->
            <!--				<span id="selectTotal2">0</span>￥-->
            <!--				</span>-->
            <!--            </div>-->
            <div class="total-bar"
                 style="margin: 10px 0; background-color: #fdf9fb;
                 text-align: center;font-size: 18px;font-weight: bolder">购物流程
            </div>
            <div class="total-bar"
                 style="margin: 10px 0; background-color: #fdf9fb;
                 text-align: center;font-size: 18px;font-weight: bolder">勾选购物车中的服装
            </div>
            <div class="total-bar"
                 style="margin: 10px 0; background-color: #fdf9fb;
                 text-align: center;font-size: 18px;font-weight: bolder">选择配送地址
            </div>
            <div class="total-bar"
                 style="margin: 10px 0; background-color: #fdf9fb;
                 text-align: center;font-size: 18px;font-weight: bolder">确认付款，提交订单
            </div>
            <!--            <div class="total-bar" style="margin: 0;padding: 0">-->
            <!--                <input type="submit" id="CartButton"-->
            <!--                       style="width: 100%;color:white;background-color: #3c3c3c ;border: white 1px solid"-->
            <!--                       value="  结  算  " class="btn btn-primary btn-lg link-account"/>-->
            <!--                </span>-->
            <!--            </div>-->
            <!--            <div class="total-bar" style="margin: 10px 0;">付款方式-->
            <!--                <span class="pull-right">-->
            <!--				微信支付-->
            <!--				</span>-->
            <!--            </div>-->
        </div>
    </div>
</div>
<!--calcTotal() -->

<!--页脚开始-->
<!--<div class="footer1"-->
<!--     style="background-color: #ffedf3;height: 100px;width: 100%;">-->
<!--    <h5 style="padding-top: 20px;margin: 0;text-align: center">-->
<!--        京ICP备11017824号-4 / 京ICP证130164号 北京市公安局朝阳分局备案编号:110105000501</h5>-->
<!--    <h5 style="padding-top: 20px;margin: 0;text-align:  center">-->
<!--        Copyright © 2006-2023 ZCOOL 中文 English</h5>selectTotal -->
<!--</div>-->
<!--页脚结束-->
<script src="../bootstrap3/js/jquery.cookie.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
    $(document).ready(function () {
        is_login()
    });

    function is_login() {
        if ($.cookie("now_uid") != null) {
            $(".leading_buns").empty();
            var loginstatus =
                '            <button class="leading_bun-2" id="userinfo" \n' +
                '                    onclick="javascript:window.location.href=\'userdata.html\'">\n' +
                '                <img id="img-avatar"  src="../images/index/用户.png" style="height: 42px;width: 42px;margin:-3px 0 0 -5px;border-radius: 100%">\n' +
                '            </button>\n' +
                '            <button class="leading_bun-2" id="logout" \n' +
                '                    onclick="logout()">\n' +
                '                <img src="../images/index/退出.png" style="height: 30px;width: 30px;">\n' +
                '            </button>' +
                '<button class="leading_bun-2" id="ship" \n' +
                '                    onclick="javascript:window.location.href=\'cart.html\'">\n' +
                '                <img src="../images/index/购物车.png" style="height: 27px;width: 27px;">\n' +
                '            </button>\n';

            $(".leading_buns").append(loginstatus);
        }
        var avartar = $.cookie("avatar");
        if (avartar != null) {
            $("#img-avatar").attr("src", avartar);
        } else {
            $("#img-avatar").attr("src", "../images/index/用户.png");
        }
    }

    function logout() {
        $.cookie("now_uid", null, {expires: 7});
        $.cookie("now_username", null, {expires: 7});
        $.cookie("avatar", null, {expires: 7});
        $.cookie("auto", null, {expires: 7});
        $.cookie("login", null, {expires: 7});
        $.ajax({
            url: "/users/logout",
            type: "POST",
            dataType: "JSON",
            success: function (json) {
                if (json.state == 200) {
                    alert("退出登录成功")
                    location.href = "login.html";
                } else {
                    alert("退出登录失败")
                }
            },
            error: function (xhr) {
                alert("产生未知的异常!" + xhr.message);
            }
        });
        history.go(0);
    }

    $(document).ready(function () {
        showCartList();
    });

    //展示购物车列表数据
    function showCartList() {
        $("#cart-list").empty();
        $.ajax({
            url: "/carts",
            type: "GET",
            dataType: "JSON",
            success: function (json) {
                var list = json.data;
                // var totalnum=0;
                // var totalprice=0;
                for (var i = 0; i < list.length; i++) {
                    var tr = '<tr>\n' +
                        '<td>\n' +
                        '    <input name="cids" value="#{cid}" type="checkbox" class="ckitem"/>\n' +
                        '</td>\n' +
                        '<td><img src="..#{image}collect.png"\n' +
                        '         class="img-responsive"/></td>\n' +
                        '<td style="">#{title}</td>\n' +
                        '<td>\n' +
                        '    <li>颜色：#{color}</li>\n' +
                        '    <li>尺码：#{size}</li>\n' +
                        '    <li>面料：#{madeof}</li>\n' +
                        '    <li>等级：#{safety}</li>\n' +
                        '</td>\n' +
                        '<td>\n' +
                        '    <div>\n' +
                        '        <input type="button" value="-" class="num-btn" onclick="subNum(#{cid})"/>\n' +
                        '        <input  id="goodsCount#{cid}" type="text" size="2" readonly="readonly"\n' +
                        '               class="num-text" value="#{num}">\n' +
                        '        <input class="num-btn" type="button" value="+" onclick="addNum(#{cid})"/>\n' +
                        '\n' +
                        '    </div>\n' +
                        '    <div style="width: 100%;border: 1px solid white;margin-top: 10px">\n' +
                        '        <input type="button" onclick=""\n' +
                        '               class="cart-del btn btn-default btn-xs" value="修改"\n' +
                        '               style="width: 70%;margin: 0 auto"/>\n' +
                        '    </div>\n' +
                        '    <div style="width: 100%;border: 1px solid white;margin-top: 5px">\n' +
                        '        <input type="button" onclick="deletebyCid(#{cid})"\n' +
                        '               class="cart-del btn btn-default btn-xs" value="删除"\n' +
                        '               style="width: 70%;margin: 0 auto"/>\n' +
                        '    </div>\n' +
                        '</td>\n' +
                        '<td>\n' +
                        '    <li>单价：<span>¥#{singlePrice}</span></li>\n' +
                        '    <li>小计：<span  id="goodsPrice#{cid}">¥#{totalPrice}</span></li>\n' +
                        '</td>\n' +
                        '                                </tr>';
                    var tr0 = '<tr>\n' +
                        '<td>\n' +
                        '<input name="cids" value="#{cid}" type="checkbox" class="ckitem" />\n' +
                        '</td>\n' +
                        '<td><img src="..#{image}collect.png" class="img-responsive" /></td>\n' +
                        '<td>#{title}#{msg}</td>\n' +
                        '<td>¥<span id="goodsPrice#{cid}">#{singlePrice}</span></td>\n' +
                        '<td>\n' +
                        '<input type="button" value="-" class="num-btn" onclick="subNum(#{cid})" />\n' +
                        '<input id="goodsCount#{cid}" type="text" size="2" readonly="readonly" class="num-text" value="#{num}">\n' +
                        '<input class="num-btn" type="button" value="+" onclick="addNum(#{cid})" />\n' +
                        '</td>\n' +
                        '<td><span id="goodsCast#{cid}">#{totalPrice}</span></td>\n' +
                        '<td>\n' +
                        '<input type="button" onclick="deletebyCid(#{cid})" class="cart-del btn btn-default btn-xs" value="删除" />\n' +
                        '</td>\n' +
                        '</tr>';
                    tr = tr.replaceAll(/#{cid}/g, list[i].cid);
                    tr = tr.replaceAll(/#{image}/g, list[i].image);
                    var titlecontent = list[i].title.substring(list[i].title.indexOf("%")+1);
                    tr = tr.replaceAll(/#{title}/g, titlecontent);
                    if(list[i].color==null){
                        tr = tr.replaceAll(/#{color}/g, "未选择");
                    }
                    tr = tr.replaceAll(/#{color}/g, list[i].color);
                    if(list[i].size==null){
                        tr = tr.replaceAll(/#{size}/g, "未选择");
                    }
                    tr = tr.replaceAll(/#{size}/g, list[i].size);
                    tr = tr.replaceAll(/#{madeof}/g, list[i].madeof);
                    tr = tr.replaceAll(/#{safety}/g, list[i].safety);
                    tr = tr.replaceAll(/#{singlePrice}/g, list[i].realPrice);
                    tr = tr.replaceAll(/#{num}/g, list[i].num);
                    tr = tr.replaceAll(/#{totalPrice}/g, list[i].realPrice * list[i].num);
                    // totalnum=totalnum+1;
                    // totalprice = totalprice +list[i].price*list[i].num;
                    if (list[i].realPrice < list[i].price) {
                        tr = tr.replace(/#{msg}/g, "比加入时降价" + (list[i].price - list[i].realPrice) + "元");
                    } else {
                        tr = tr.replace(/#{msg}/g, "");
                    }
                    $("#cart-list").append(tr);
                }
                // $("#selectCount").html(totalnum);
                // $("#selectTotal").html(totalprice);
            },
            error: function (xhr) {
                alert("加载购物车列表数据时产生未知的异常" + xhr.status);
            }
        });
    }

    function addNum(cid) {
        $.ajax({
            url: "/carts/" + cid + "/num/add",
            type: "POST",
            dataType: "JSON",
            success: function (json) {
                if (json.state == 200) {
                    $("#goodsCount" + cid).val(json.data);//字符串+整数cid后结果为字符串

                    //更新该商品总价
                    /*
                                html()方法:
                                不传参:是获取某个标签内部的内容(文本或标签)
                                传参:将参数放到标签里面替换掉该标签原有内容
                                * */
                    var price = $("#goodsPrice" + cid).html();
                    var totalPrice = price * json.data;

                    //将商品总价更新到控件中
                    $("#goodsCast" + cid).html(totalPrice);
                    history.go(0);
                } else {
                    alert("增加购物车商品数量失败" + json.message);
                }
            },
            error: function (xhr) {
                alert("增加购物车商品数量时产生未知的异常!" + xhr.message);
            }
        });
    }

    function subNum(cid) {
        $.ajax({
            url: "/carts/" + cid + "/num/sub",
            type: "POST",
            dataType: "JSON",
            success: function (json) {
                if (json.state == 200) {
                    $("#goodsCount" + cid).val(json.data);//字符串+整数cid后结果为字符串

                    //更新该商品总价
                    /*
                                html()方法:
                                不传参:是获取某个标签内部的内容(文本或标签)
                                传参:将参数放到标签里面替换掉该标签原有内容
                                * */
                    var price = $("#goodsPrice" + cid).html();
                    var totalPrice = price * json.data;

                    //将商品总价更新到控件中
                    $("#goodsCast" + cid).html(totalPrice);
                    // alert(json.data)
                    if (json.data) {
                        deletebyCid(cid);
                    }
                    history.go(0);
                } else {
                    alert("减少购物车商品数量失败" + json.message);
                }
            },
            error: function (xhr) {
                alert("减少购物车商品数量时产生未知的异常!" + xhr.message);
            }
        });
    }

    function deletebyCid(cid) {
        $.ajax({
            url: "/carts/" + cid + "/delete",
            type: "POST",
            dataType: "JSON",
            success: function (json) {
                location.href = "cart.html";
            },
            error: function (xhr) {
                alert("删除时产生未知的异常!" + xhr.message);
            }
        });
    }


</script>

</body>

</html>